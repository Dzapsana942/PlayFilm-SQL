ğŸ¬ PlayFilm â€” Projekt SQL (T-SQL)

PlayFilm to kompletnie zaprojektowany system bazodanowy platformy streamingowej.
Projekt zostaÅ‚ stworzony jako przykÅ‚ad do portfolio â€” pokazuje umiejÄ™tnoÅ›ci z zakresu:

projektowania baz danych

tworzenia widokÃ³w analitycznych

pisania raportÃ³w SQL

pracy z uprawnieniami i rolami

praktycznej analityki danych

ğŸ“Š 1. ERD â€” Diagram relacji

ğŸ—ƒ 2. Struktura bazy danych

Baza PlayFilm zawiera nastÄ™pujÄ…ce tabele:

Users

Informacje o uÅ¼ytkownikach platformy.

Plans

DostÄ™pne plany subskrypcyjne.

UserPlans

Historia zmian planÃ³w (uÅ¼ytkownik moÅ¼e zmieniaÄ‡ plan w czasie).

Movies

Biblioteka filmÃ³w.

WatchHistory

Historia sesji oglÄ…dania (kto, co, kiedy, ile minut).

Ratings

Oceny filmÃ³w (ograniczenie: 1 ocena na film per uÅ¼ytkownik).

Projekt odwzorowuje realnÄ… logikÄ™ zachowania platform streamingowych.

ğŸ“¥ 3. PrzykÅ‚adowe dane

Plik 02_insert_sample_data.sql zawiera dane pozwalajÄ…ce generowaÄ‡ sensowne raporty:

uÅ¼ytkownicy z rÃ³Å¼nych krajÃ³w,

realne godziny oglÄ…dania,

wiele sesji uÅ¼ytkownikÃ³w,

oceny filmÃ³w,

zmiany planÃ³w subskrypcji.

ğŸ“ˆ 4. Widoki analityczne (Views)

Plik 03_views.sql zawiera nastÄ™pujÄ…ce widoki:

âœ” vw_UserSummary

Podsumowanie aktywnoÅ›ci uÅ¼ytkownika:

liczba obejrzanych filmÃ³w

liczba sesji

Å‚Ä…czny czas oglÄ…dania

Å›rednia ocena uÅ¼ytkownika

âœ” vw_MovieStats

Statystyki filmÃ³w:

liczba odsÅ‚on

suma minut oglÄ…dania

liczba ocen

Å›rednia ocena

Zbudowane z uÅ¼yciem CTE i oddzielnych agregacji.

âœ” vw_MovieRankingByMinutes

Ranking filmÃ³w wg sumy obejrzanych minut
(Funkcja okna: RANK() OVER (ORDER BY MinutesWatched DESC)).

âœ” vw_CountryStats

AktywnoÅ›Ä‡ uÅ¼ytkownikÃ³w w podziale na kraje.

ğŸ“„ 5. Raporty SQL

Wszystkie gotowe zapytania znajdujÄ… siÄ™ w:

ğŸ‘‰ 03.2_reports_examples.sql

ZawierajÄ… m.in.:

top 5 filmÃ³w,

najlepiej oceniane filmy,

najbardziej aktywnych uÅ¼ytkownikÃ³w,

statystyki krajÃ³w,

rankingi wg czasu oglÄ…dania,

przykÅ‚ady zapytaÅ„ analitycznych.

ğŸ” 6. Model bezpieczeÅ„stwa

Plik 04_security_and_roles.sql implementuje:

âœ” Login & uÅ¼ytkownik:

playfilm_reader

âœ” Rola raportowa:

report_reader

âœ” Uprawnienia:

SELECT tylko na widoki

DENY na wszystkie tabele (Users, Movies, WatchHistory itd.)

âœ” Test uprawnieÅ„:
EXECUTE AS USER = 'playfilm_reader';

ğŸ§° 7. Technologie

Microsoft SQL Server 2019+

T-SQL

Widoki, CTE, funkcje okna

SSMS

ğŸ¯ Cel projektu

Celem projektu jest pokazanie praktycznej wiedzy SQL poprzez:

zaprojektowanie struktury bazy,

przygotowanie danych,

stworzenie widokÃ³w biznesowych,

generowanie raportÃ³w,

wdroÅ¼enie rÃ³l i uprawnieÅ„.

---

ğŸ‡¬ğŸ‡§ English Version â€” README
ğŸ¬ PlayFilm â€” SQL Project (T-SQL)

PlayFilm is a fully designed SQL database system simulating a real streaming platform.
It demonstrates skills in:

database modeling

analytical SQL

report creation

permissions & security

data engineering practices

ğŸ“Š 1. ERD â€” Entity Relationship Diagram

ğŸ—ƒ 2. Database Structure
Users

User accounts.

Plans

Subscription plans.

UserPlans

Plan change history.

Movies

Movie catalog.

WatchHistory

Watch sessions (who watched what, when, and for how long).

Ratings

Movie ratings (1 rating per user per movie, enforced with UNIQUE constraint).

ğŸ“¥ 3. Sample Data

The file 02_insert_sample_data.sql includes realistic sample data:

multiple countries

watch sessions

movie ratings

subscription plan changes

movies from various genres and years

ğŸ“ˆ 4. Analytical Views

Contained in 03_views.sql:

âœ” vw_UserSummary

User activity summary.

âœ” vw_MovieStats

Movie performance metrics.

âœ” vw_MovieRankingByMinutes

Ranking based on minutes watched
(using: RANK() OVER (ORDER BY MinutesWatched DESC)).

âœ” vw_CountryStats

Aggregated statistics by user country.

ğŸ“„ 5. Analytical Reports

All SQL reports are in:

ğŸ‘‰ 03.2_reports_examples.sql

Includes:

top movies

highest-rated titles

most active users

country-level statistics

window-function examples

ğŸ” 6. Security Model

File 04_security_and_roles.sql sets up:

login + user: playfilm_reader

role: report_reader

permissions:

GRANT SELECT on views

DENY table access

Includes permission testing.

ğŸ§° 7. Technologies Used

SQL Server 2019+

T-SQL

CTEs, window functions, views

SSMS

ğŸ¯ Project Goal

To provide a complete SQL portfolio project demonstrating:

clean data model

prepared sample dataset

analytical SQL views

business reports

real-world permission model
